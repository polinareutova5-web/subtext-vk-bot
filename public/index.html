    <!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Subtext — Вход</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

<style>
:root {
  --lamp-on: 0;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  min-height: 100vh;
  font-family: 'Poppins', sans-serif;
  background: radial-gradient(circle at top, #141814, #0b0e0b);
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  overflow: hidden;
  transition: background .6s ease;
}

body[data-on="true"] {
  background:
    radial-gradient(circle at top, #e8f5e9, #c8e6c9),
    linear-gradient(135deg, #e0f2f1, #f1f8e9);
}

/* ===== СВЕТ ОТ ЛАМПЫ ===== */
.light {
  position: absolute;
  left: 0;
  top: 0;
  width: 420px;
  height: 100%;
  pointer-events: none;
  background: radial-gradient(circle at 120px 220px,
    rgba(255,255,200,.65),
    rgba(255,255,200,.25) 35%,
    transparent 65%);
  opacity: calc(var(--lamp-on));
  transition: opacity .6s ease;
}

/* ===== ЛАМПА ===== */
.lamp {
  position: absolute;
  left: 60px;
  bottom: 40px;
  width: 160px;
  cursor: pointer;
}

.lamp-head {
  width: 120px;
  height: 60px;
  background: #2e2e2e;
  border-radius: 60px 60px 20px 20px;
  margin-left: 20px;
  box-shadow: inset 0 -6px 0 rgba(255,255,255,.08);
}

.lamp-neck {
  width: 10px;
  height: 90px;
  background: #444;
  margin: auto;
}

.lamp-base {
  width: 140px;
  height: 18px;
  background: #333;
  border-radius: 999px;
  margin: auto;
}

.switch {
  margin-top: 10px;
  font-size: .75rem;
  opacity: .7;
  text-align: center;
}

/* ===== CARD ===== */
.card {
  opacity: 0;
  transform: translateY(20px);
  pointer-events: none;
  transition: .6s ease;
  width: 100%;
  max-width: 420px;
  background: rgba(255,255,255,0.65);
  backdrop-filter: blur(18px);
  border-radius: 26px;
  padding: 3rem 2.5rem;
  box-shadow:
    0 20px 60px rgba(0,0,0,.15),
    inset 0 0 0 1px rgba(255,255,255,.4);
  text-align: center;
  color: #1b3a1b;
  z-index: 2;
}

body[data-on="true"] .card {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

/* ===== TEXT ===== */
.logo {
  font-family: 'Playfair Display', serif;
  font-size: 3.8rem;
  letter-spacing: 3px;
  text-transform: uppercase;
  color: rgba(255,255,255,0.9);
  text-shadow:
    2px 2px 0 rgba(0,60,0,.7),
    0 10px 25px rgba(0,0,0,.25);
  margin-bottom: .4rem;
}

.subtitle {
  font-size: .95rem;
  opacity: .85;
  margin-bottom: 2.5rem;
}

input {
  width: 100%;
  padding: 1rem 1.2rem;
  border-radius: 999px;
  border: none;
  font-size: 1rem;
  outline: none;
  text-align: center;
  margin-bottom: 1.2rem;
}

button {
  width: 100%;
  padding: 1rem;
  border-radius: 999px;
  border: none;
  font-weight: 600;
  color: #fff;
  cursor: pointer;
  background: linear-gradient(135deg, #1b5e20, #66bb6a);
}

.error {
  margin-top: 1rem;
  font-size: .85rem;
  color: #b71c1c;
  min-height: 1.2em;
}

.hint {
  margin-top: 1.6rem;
  font-size: .75rem;
  opacity: .7;
}
</style>
</head>

<body data-on="false">

<div class="light"></div>

<!-- ЛАМПА -->
<div class="lamp" onclick="toggleLamp()">
  <div class="lamp-head"></div>
  <div class="lamp-neck"></div>
  <div class="lamp-base"></div>
  <div class="switch">включить лампу</div>
</div>

<!-- CARD -->
<div class="card">
  <div class="logo">Subtext</div>
  <div class="subtitle">Личный кабинет ученика</div>

  <input type="text" id="idInput" placeholder="Введите ваш ID">
  <button onclick="enterById()">Войти</button>

  <div id="errorMsg" class="error"></div>
  <div class="hint">ID выдаётся преподавателем</div>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbwHKB_QtqVQN8XHjq8ftpKUG7pFa1gd2yG5nE76o-ssxBujJdfh3LOOw2ouGNgn7yudRw/exec";

let isOn = false;
const root = document.documentElement;
const body = document.body;

function toggleLamp() {
  isOn = !isOn;
  body.setAttribute("data-on", isOn);
  root.style.setProperty("--lamp-on", isOn ? 1 : 0);
}

async function enterById() {
  const id = idInput.value.trim();
  errorMsg.textContent = "";

  if (!id) {
    errorMsg.textContent = "Введите ID";
    return;
  }

  try {
    const res = await fetch(`${API_URL}?action=check_user&userId=${encodeURIComponent(id)}`);
    const data = await res.json();

    if (data.success) {
      window.location.href = `lk.html?id=${encodeURIComponent(id)}`;
    } else {
      errorMsg.textContent = "Пользователь не зарегистрирован";
    }
  } catch {
    errorMsg.textContent = "Ошибка соединения";
  }
}
</script>

</body>
</html>
